"use strict";(self.webpackChunkreact_native_website=self.webpackChunkreact_native_website||[]).push([[82325],{43023:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>d});var i=t(63696);const s={},o=i.createContext(s);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}},68526:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"5_references/1_nifi_cluster/3_node_config","title":"Node configuration","description":"NodeConfig defines the node configuration","source":"@site/versioned_docs/version-v0.11.0/5_references/1_nifi_cluster/3_node_config.md","sourceDirName":"5_references/1_nifi_cluster","slug":"/5_references/1_nifi_cluster/3_node_config","permalink":"/nifikop/docs/v0.11.0/5_references/1_nifi_cluster/3_node_config","draft":false,"unlisted":false,"editUrl":"https://github.com/konpyutaika/nifikop/edit/master/site/website/versioned_docs/version-v0.11.0/5_references/1_nifi_cluster/3_node_config.md","tags":[],"version":"v0.11.0","lastUpdatedBy":"michaelhutchings-napier","lastUpdatedAt":1764270118000,"frontMatter":{"id":"3_node_config","title":"Node configuration","sidebar_label":"Node configuration"},"sidebar":"docs","previous":{"title":"Read only configurations","permalink":"/nifikop/docs/v0.11.0/5_references/1_nifi_cluster/2_read_only_config"},"next":{"title":"Node","permalink":"/nifikop/docs/v0.11.0/5_references/1_nifi_cluster/4_node"}}');var s=t(62540),o=t(43023);const r={id:"3_node_config",title:"Node configuration",sidebar_label:"Node configuration"},d=void 0,c={},a=[{value:"NodeConfig",id:"nodeconfig",level:2},{value:"StorageConfig",id:"storageconfig",level:2},{value:"ExternalVolumeConfig",id:"externalvolumeconfig",level:2},{value:"Metadata",id:"metadata",level:2}];function l(e){const n={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"NodeConfig defines the node configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'   default_group:\n      # provenanceStorage allow to specify the maximum amount of data provenance information to store at a time\n      # https://nifi.apache.org/docs/nifi-docs/html/administration-guide.html#write-ahead-provenance-repository-properties\n      provenanceStorage: "10 GB"\n      #RunAsUser define the id of the user to run in the Nifi image\n      # +kubebuilder:validation:Minimum=1\n      runAsUser: 1000\n      # Set this to true if the instance is a node in a cluster.\n      # https://nifi.apache.org/docs/nifi-docs/html/administration-guide.html#basic-cluster-setup\n      isNode: true\n      # Additionnal metadata to merge to the pod associated\n      podMetadata:\n        annotations:\n          node-annotation: "node-annotation-value"\n        labels:\n          node-label: "node-label-value"\n      # Docker image used by the operator to create the node associated\n      # https://hub.docker.com/r/apache/nifi/\n#      image: "apache/nifi:1.11.2"\n      # nodeAffinity can be specified, operator populates this value if new pvc added later to node\n      # https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#node-affinity\n#      nodeAffinity:\n      # podAffinity allows scheduling this node\'s Pod near other Pods.\n      # If not set, no podAffinity is configured on the Pod.\n      # https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#inter-pod-affinity-and-anti-affinity\n#      podAffinity:\n#        requiredDuringSchedulingIgnoredDuringExecution:\n#          - topologyKey: kubernetes.io/hostname\n#            labelSelector:\n#              matchExpressions:\n#                - key: app.kubernetes.io/name\n#                  operator: In\n#                  values: ["forklift"]\n      # podAntiAffinity allows scheduling this node\'s Pod away from other Pods.\n      # If omitted, the operator\'s default pod anti-affinity behavior is used.\n      # If set (even {}), it disables the default anti-affinity and uses the\n      # provided PodAntiAffinity configuration as-is.\n#      podAntiAffinity: {}\n      # imagePullPolicy define the pull policy for NiFi cluster docker image\n      imagePullPolicy: IfNotPresent\n      # priorityClassName define the name of the priority class to be applied to these nodes\n      priorityClassName: "example-priority-class-name"\n      # externalVolumeConfigs specifies a list of volume to mount into the main container.\n      externalVolumeConfigs:\n        - name: example-volume\n          mountPath: "/opt/nifi/example"\n          secret:\n            secretName: "raw-controller"\n      # storageConfigs specifies the node related configs\n      storageConfigs:\n        # Name of the storage config, used to name PV to reuse into sidecars for example.\n        - name: provenance-repository\n          # Path where the volume will be mount into the main nifi container inside the pod.\n          mountPath: "/opt/nifi/provenance_repository"\n          # Kubernetes PVC spec\n          # https://kubernetes.io/docs/tasks/configure-pod-container/configure-persistent-volume-storage/#create-a-persistentvolumeclaim\n          pvcSpec:\n            accessModes:\n              - ReadWriteOnce\n            storageClassName: "standard"\n            resources:\n              requests:\n                storage: 10Gi\n        - mountPath: "/opt/nifi/nifi-current/logs"\n          name: logs\n          pvcSpec:\n            accessModes:\n              - ReadWriteOnce\n            storageClassName: "standard"\n            resources:\n              requests:\n                storage: 10Gi\n'})}),"\n",(0,s.jsx)(n.h2,{id:"nodeconfig",children:"NodeConfig"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Default"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"provenanceStorage"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsxs)(n.td,{children:["provenanceStorage allow to specify the maximum amount of data provenance information to store at a time: ",(0,s.jsx)(n.a,{href:"https://nifi.apache.org/docs/nifi-docs/html/administration-guide.html#write-ahead-provenance-repository-properties",children:"write-ahead-provenance-repository-properties"})]}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:'"8 GB"'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"runAsUser"}),(0,s.jsx)(n.td,{children:"int64"}),(0,s.jsx)(n.td,{children:"define the id of the user to run in the Nifi image"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"1000"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"fsGroup"}),(0,s.jsx)(n.td,{children:"int64"}),(0,s.jsx)(n.td,{children:"define the id of the group for each volumes in Nifi image"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"1000"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"isNode"}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsxs)(n.td,{children:["Set this to true if the instance is a node in a cluster: ",(0,s.jsx)(n.a,{href:"https://nifi.apache.org/docs/nifi-docs/html/administration-guide.html#basic-cluster-setup",children:"basic-cluster-setup"})]}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"true"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"image"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsxs)(n.td,{children:["Docker image used by the operator to create the node associated. ",(0,s.jsx)(n.a,{href:"https://hub.docker.com/r/apache/nifi/",children:"Nifi docker registry"})]}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:'""'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"imagePullPolicy"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://godoc.org/k8s.io/api/core/v1#PullPolicy",children:"PullPolicy"})}),(0,s.jsx)(n.td,{children:"define the pull policy for NiFi cluster docker image."}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:'""'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"nodeAffinity"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsxs)(n.td,{children:["operator populates this value if new pvc added later to node ",(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#node-affinity",children:"node-affinity"})]}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"nil"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"storageConfigs"}),(0,s.jsxs)(n.td,{children:["[\xa0]",(0,s.jsx)(n.a,{href:"#storageconfig",children:"StorageConfig"})]}),(0,s.jsx)(n.td,{children:"specifies the node related configs."}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"nil"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"externalVolumeConfigs"}),(0,s.jsxs)(n.td,{children:["[\xa0]",(0,s.jsx)(n.a,{href:"#externalvolumeconfig",children:"ExternalVolumeConfig"})]}),(0,s.jsx)(n.td,{children:"specifies a list of volume to mount into the main container."}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"nil"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"serviceAccountName"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"specifies the serviceAccount used for this specific node."}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:'"default"'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"resourcesRequirements"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://godoc.org/k8s.io/api/core/v1#ResourceRequirements",children:"ResourceRequirements"})}),(0,s.jsxs)(n.td,{children:["works exactly like Container resources, the user can specify the limit and the requests through this property ",(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/",children:"manage-compute-resources-container"}),"."]}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"nil"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"imagePullSecrets"}),(0,s.jsxs)(n.td,{children:["[\xa0]",(0,s.jsx)(n.a,{href:"https://godoc.org/k8s.io/api/core/v1#TypedLocalObjectReference",children:"LocalObjectReference"})]}),(0,s.jsx)(n.td,{children:"specifies the secret to use when using private registry."}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"nil"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"nodeSelector"}),(0,s.jsx)(n.td,{children:"map[string]string"}),(0,s.jsxs)(n.td,{children:["nodeSelector can be specified, which set the pod to fit on a node ",(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#nodeselector",children:"nodeselector"})]}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"nil"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"tolerations"}),(0,s.jsxs)(n.td,{children:["[\xa0]",(0,s.jsx)(n.a,{href:"https://godoc.org/k8s.io/api/core/v1#Toleration",children:"Toleration"})]}),(0,s.jsxs)(n.td,{children:["tolerations can be specified, which set the pod's tolerations ",(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/#concepts",children:"taint-and-toleration"}),"."]}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"nil"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"podMetadata"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"#metadata",children:"Metadata"})}),(0,s.jsx)(n.td,{children:"define additionnal metadata to merge to the pod associated."}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"nil"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"priorityClassName"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Specify the name of the priority class to apply to pods created with this node config"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"nil"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"storageconfig",children:"StorageConfig"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Default"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"name"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Name of the storage config, used to name PV to reuse into sidecars for example."}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"-"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"mountPath"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Path where the volume will be mount into the main nifi container inside the pod."}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"-"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"pvcSpec"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://godoc.org/k8s.io/api/core/v1#PersistentVolumeClaimSpec",children:"PersistentVolumeClaimSpec"})}),(0,s.jsxs)(n.td,{children:["Kubernetes PVC spec. ",(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/configure-pod-container/configure-persistent-volume-storage/#create-a-persistentvolumeclaim",children:"create-a-persistentvolumeclaim"}),"."]}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"-"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"externalvolumeconfig",children:"ExternalVolumeConfig"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Default"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://pkg.go.dev/k8s.io/api/core/v1#VolumeMount",children:"VolumeMount"})}),(0,s.jsx)(n.td,{children:"describes a mounting of a Volume within a container."}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"-"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://pkg.go.dev/k8s.io/api/core/v1#VolumeSource",children:"VolumeSource"})}),(0,s.jsx)(n.td,{children:"VolumeSource represents the location and type of the mounted volume."}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"-"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"metadata",children:"Metadata"}),"\n",(0,s.jsxs)(n.p,{children:["| annotations | map[string]string | Additionnal annotation to merge to the pod associated ",(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/#syntax-and-character-set",children:"annotations"}),". |No|nil|\n| labels  | map[string]string | Additionnal labels to merge to the pod associated ",(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#syntax-and-character-set",children:"labels"}),".               |No|nil|"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);